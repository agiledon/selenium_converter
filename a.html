<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>User Can View Customer Claims</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
  <tbody>
    <tr>
      <td rowspan="1" colspan="3">Handles Claim DAO Exceptions for Customer in Context<br>
      </td>
    </tr>

    <tr>
      <td>store</td>
      <td>0</td>
      <td>errorNumberColumnIndex</td>
    </tr>
    <tr>
      <td>store</td>
      <td>1</td>
      <td>errorDescriptionColumnIndex</td>
    </tr>
    <tr>
      <td>store</td>
      <td>2</td>
      <td>errorSourceColumnIndex</td>
    </tr>
    <tr>
      <td>open</td>
      <td>/CRMTools/logoutSimulator.jsp</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>open</td>
      <td>/CRMTools/viewCustomerClaims.do?customerId=123456&customerName=NotNullName&brand=SUN&inContext=Y&targetUserId=U100006</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>type</td>
      <td>j_username</td>
      <td>U100006</td>
    </tr>
    <tr>
      <td>type</td>
      <td>j_password</td>
      <td>x</td>
    </tr>
    <tr>
        <td>clickAndWait</td>
        <td>Login</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
      <td>verifyTitle</td>
      <td>Customer Claims</td>
      <td>&nbsp;</td>
    </tr>

    <!-- Verify error displayed correctly on main page. -->
    <tr>
      <td>verifyText</td>
      <td>errorHeading</td>
      <td>ERROR</td>
    </tr>
    <tr>
      <td>verifyText</td>
      <td>errorMessage</td>
      <td>The following error(s) occurred:*</td>
    </tr>
    <tr>
      <td>verifyText</td>
      <td>//ul[@id='applicationErrors']/li[1]/a</td>
      <td>Customer not found</td>
    </tr>
    <tr>
      <td>verifyElementNotPresent</td>
      <td>//ul[@id='applicationErrors']/li[2]/a</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>verifyTextNotPresent</td>
      <td>No Claims exist for this customer</td>
      <td>&nbsp;</td>
    </tr>

    <!-- Verify error details correct in popup. -->
    <tr>
        <td>click</td>
        <td>link=Customer not found</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
      <td>selectWindowWithWait</td>
      <td>viewErrorDetailsPopup</td>
      <td>60000</td>
    </tr>
    <tr>
        <td>waitForCondition</td>
        <td>
            var element = selenium.page().findElementAttempt("//tr[@id='errorRootError']");
            element
        </td>
        <td>60000</td>
    </tr>
    <tr>
        <td>verifyText</td>
        <td>document.getElementById('errorRootError').cells[${errorNumberColumnIndex}]</td>
        <td>00008</td>
    </tr>
    <tr>
        <td>verifyText</td>
        <td>document.getElementById('errorRootError').cells[${errorDescriptionColumnIndex}]</td>
        <td>Customer not found</td>
    </tr>
    <tr>
        <td>verifyText</td>
        <td>document.getElementById('errorRootError').cells[${errorSourceColumnIndex}]</td>
        <td>ENO</td>
    </tr>
    <tr>
        <td>verifyElementNotPresent</td>
        <td>errorCausingError[1]</td>
        <td>&nbsp</td>
    </tr>
    <tr>
        <td>close</td>
        <td>viewErrorDetailsPopup</td>
        <td>&nbsp;</td>
    </tr>

  </tbody>
</table>
</body>
</html>